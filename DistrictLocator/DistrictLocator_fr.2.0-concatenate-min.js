globalConfig={};globalConfig.language="FR";globalConfig.otherInfoHTML="";var MOEMapLanguage={MarkerAlt:"Lieu",InfoResultTitle:"R\u00e9sultat situ\u00e9 dans le",OfficeAddressLbl:"Adresse du bureau: ",TelLbl:"T\u00e9l\u00e9phone: ",FaxLbl:" T\u00e9l\u00e9copieur: ",TollFreeLbl:"Sans frais: ",LocatedWithinTxt:" est dans le ",SearchHelpTxt:"Rechercher par <STRONG>adresse</STRONG>, <STRONG>ville</STRONG>, <STRONG>code postal</STRONG> ou cliquer sur aide pour plus d\u2019information sur la recherche avanc\u00e9e.<br>",NoMOEDistrictMsg:"Le syst\u00e8me n\u2019a pas trouv\u00e9 de district du MEO",MOEDistrict:{Barrie:"District de Barrie du MEO",Guelph:"District de Guelph du MEO","Halton-Peel":"District de Halton-Peel du MEO",Hamilton:"District de Hamilton du MEO",Kingston:"District de Kingston du MEO",London:"District de London du MEO",Ottawa:"District d\u2019Ottawa du MEO","Owen Sound":"District d\u2019Owen Sound du MEO",Peterborough:"District de Peterborough du MEO",Sarnia:"District de Sarnia du MEO",Sudbury:"District de Sudbury du MEO","Thunder Bay":"District de Thunder Bay du MEO",Timmins:"District de Timmins du MEO",Toronto:"District de Toronto du MEO",Niagra:"District de Niagara du MEO","York-Durham":"District de York-Durham du MEO"},MOEDistrictStreet:{Barrie:"Bureau 1203, 54, alle Cedar Pointe",Guelph:"1, chemin Stone Ouest","Halton-Peel":"Bureau 300, 4145 North Service Road",Hamilton:"9<sup>e</sup> \u00e9tage, 119, rue King Ouest",Kingston:"C. P. 22032, 1259 rue Gardiners",London:"733, chemin Exeter",Ottawa:"2430 Don Reid Drive","Owen Sound":"101, rue 17<sup>e</sup> Est",Peterborough:"300, rue Water, Place Robinson",Sarnia:"1094, chemin London",Sudbury:"Bureau 1201, 199, rue Larch","Thunder Bay":"3<sup>e</sup> \u00e9tage, bureau 331B, 435, rue James Sud",Timmins:"Complexe du gouvernement de l\u2019Ontario, Sac postal 3080, Autoroute 101 Est",Toronto:"8<sup>e</sup> \u00e9tage, 5775, rue Yonge",Niagra:"9<sup>e</sup> \u00e9tage, 301, rue St. Paul","York-Durham":"5<sup>e</sup> \u00e9tage, 230 chemin Westney Sud"},moeDistrictThunderbayTollFreePhone:{"Thunder Bay":"1-800-875-7772 (Dans la zone des indicatifs r\u00e9gionaux 705 et 807)"},moeDistrictThunderbayFax:{"Thunder Bay":"(807) 473-3160 ou (807) 475-1754"}};globalConfig.url="http://stage.giscoecache.lrc.gov.on.ca/ArcGIS/rest/services/MOE/MOE_Districts_Full_Bnd/MapServer";globalConfig.chooseLang=function(b,a){return(globalConfig.language==="EN")?b:a};globalConfig.searchableFieldsList=[{en:"address",fr:"adresse"},{en:"city name",fr:"ville"},{en:"postal code",fr:"code postal"}];globalConfig.searchHelpTxt=globalConfig.chooseLang("You may search by ","Vous pouvez rechercher par ");for(var i=0;i<globalConfig.searchableFieldsList.length-1;i++){globalConfig.searchHelpTxt=globalConfig.searchHelpTxt+"<strong>"+globalConfig.chooseLang(globalConfig.searchableFieldsList[i].en,globalConfig.searchableFieldsList[i].fr)+"</strong>, "}globalConfig.searchHelpTxt=globalConfig.searchHelpTxt+"<strong>"+globalConfig.chooseLang(globalConfig.searchableFieldsList[i].en,globalConfig.searchableFieldsList[i].fr)+"</strong> "+globalConfig.chooseLang("or see help for advanced options.","ou consulter l'aide pour de l'information sur les recherches avanc&eacute;es.");globalConfig.searchControlHTML='<div id="searchTheMap"></div><div id="searchHelp"></div><br>    <label class="element-invisible" for="map_query">'+globalConfig.chooseLang("Search the map","Recherche carte interactive")+'</label>	<input id="map_query" type="text" title="'+globalConfig.chooseLang("Search term","Terme de recherche")+'" maxlength="100" onkeypress="return globalConfig.entsub(event)" size="50" />	<label class="element-invisible" for="search_submit">'+globalConfig.chooseLang("Search","Recherche")+'</label>	<input type="submit" onclick="globalConfig.search()" id="search_submit" value="'+globalConfig.chooseLang("Search","Recherche")+'" title="'+globalConfig.chooseLang("Search","Recherche")+'" />	<label class="element-invisible" for="search_clear">'+globalConfig.chooseLang("Clear","Effacer")+'</label>	<input type="submit" value="&nbsp;'+globalConfig.chooseLang("Clear","Effacer")+'&nbsp;" id="search_clear" title="'+globalConfig.chooseLang("Clear","Effacer")+'" onclick="INITIALIZATION.init()" />	<div id="information"></div>';globalConfig.preIdentifyCallbackName="SWPLocator";globalConfig.postIdentifyCallbackName="SWPLocator";globalConfig.addressGeocodingCallbackName="SWPLocator";globalConfig.opacity=0.9;globalConfig.pointBufferTool={available:false};globalConfig.generateURLTool={available:false};globalConfig.usejQueryUITable=false;globalConfig.usePredefinedMultipleTabs=false;globalConfig.locationServicesList=[];globalConfig.maxQueryZoomLevel=12;globalConfig.identifyMarkerRedTearDrop=true;globalConfig.displayDisclaimer=true;globalConfig.disallowMouseClick=true;globalConfig.search=function(){var a=document.getElementById(globalConfig.searchInputBoxDivId).value.trim();if(a.length===0){return}MOEMAP.clearOverlays();globalConfig.maxQueryZoomLevel=12;MOEMAP.identifyMultiplePolygonLayersWithLocation(a)};globalConfig.identifyMultiplePolygonLayersServicesTemplate={layerList:[{url:globalConfig.url+"/0",returnGeometry:false,returnFields:["OBJECTID","MOE_DISTRICT","STREET_NAME","CITY","POSTALCODE","PHONENUMBER","TOLLFREENUMBER","FAXNUMBER","MOE_DISTRICT_NAME"]}],merge:function(d){var b=globalConfig.identifyMultiplePolygonLayersServicesTemplate.layerList[0]["result"].features;if(b.length==0){document.getElementById(globalConfig.informationDivId).innerHTML="<i><b>"+globalConfig.returnedAddress+"</i></b>"+MOEMapLanguage.LocatedWithinTxt+"<b><i>"+MOEMapLanguage.NoMOEDistrictMsg+".</i></b>";var f="<i>"+globalConfig.returnedAddress+"</i><br><br><strong>"+MOEMapLanguage.InfoResultTitle+"</strong><br><h3>"+MOEMapLanguage.NoMOEDistrictMsg+"</h3>";return f}else{var g=globalConfig.identifyMultiplePolygonLayersServicesTemplate.layerList[0]["result"].features[0].attributes;var e="";var p="";var k="";var o="";var h="";if(globalConfig.language=="EN"){e=g.MOE_DISTRICT+" MOE District";p=MOEMapLanguage.OfficeAddressLbl;k=g.STREET_NAME;o=g.TOLLFREENUMBER;h=g.FAXNUMBER}else{e=MOEMapLanguage.MOEDistrict[g.MOE_DISTRICT];p=MOEMapLanguage.OfficeAddressLbl;k=MOEMapLanguage.MOEDistrictStreet[g.MOE_DISTRICT];if(g.MOE_DISTRICT=="Thunder Bay"){o=MOEMapLanguage.moeDistrictThunderbayTollFreePhone["Thunder Bay"];h=MOEMapLanguage.moeDistrictThunderbayFax["Thunder Bay"]}else{o=g.TOLLFREENUMBER;h=g.FAXNUMBER}}document.getElementById(globalConfig.informationDivId).innerHTML="<i><b>"+globalConfig.returnedAddress+"</i></b>"+MOEMapLanguage.LocatedWithinTxt+"<b><i>"+e+".</i></b>";var c=g.CITY;var a=g.POSTALCODE;var l=MOEMapLanguage.TelLbl+g.PHONENUMBER;var n=MOEMapLanguage.FaxLbl+h;var m=MOEMapLanguage.TollFreeLbl+o;var j=globalConfig.returnedAddress;var f="<i>"+j+"</i><br><br><strong>"+MOEMapLanguage.InfoResultTitle+"</strong><br><h3>"+e+"</h3><br>"+p+"<br>"+k+"<br>"+c+" "+a+"<br>"+m+"<br>"+l+n;return f}}};if(globalConfig.language==="EN"){globalConfig.SearchInteractiveMapFormLang=globalConfig.SearchInteractiveMapFormLang||"Search interactive map form";globalConfig.SearchInteractiveMapLang=globalConfig.SearchInteractiveMapLang||"Search the map";globalConfig.SearchLang=globalConfig.SearchLang||"Search";globalConfig.TermLang=globalConfig.TermLang||"Term";globalConfig.InputBoxSizeLang=globalConfig.InputBoxSizeLang||"415px";globalConfig.degreeSymbolLang=globalConfig.degreeSymbolLang||"&deg;";globalConfig.selectTooltip=globalConfig.selectTooltip||"Select";globalConfig.UTM_ZoneLang=globalConfig.UTM_ZoneLang||"UTM Zone";globalConfig.EastingLang=globalConfig.EastingLang||"Easting";globalConfig.NorthingLang=globalConfig.NorthingLang||"Northing";globalConfig.noResultFoundMsg=globalConfig.noResultFoundMsg||"Your search returned no result. Please refine your search.";globalConfig.searchCenterLang=globalConfig.searchCenterLang||"Search center";globalConfig.searchRadiusLang=globalConfig.searchRadiusLang||"search radius";globalConfig.searchKMLang=globalConfig.searchKMLang||"KM";globalConfig.totalFeatureReturnedLang=globalConfig.totalFeatureReturnedLang||"Total features returned";globalConfig.only1DisplayedLang=globalConfig.only1DisplayedLang||", only 1 is displayed.";globalConfig.westSymbolLang=globalConfig.westSymbolLang||"W";globalConfig.distanceLang=globalConfig.distanceLang||"Distance (KM)";globalConfig.searchingLang=globalConfig.searchingLang||"Searching for results...";globalConfig.inGobalRegionLang=globalConfig.inGobalRegionLang||"in Ontario";globalConfig.inCurrentMapExtentLang=globalConfig.inCurrentMapExtentLang||"in the current map display";globalConfig.forLang="for";globalConfig.yourSearchLang=globalConfig.yourSearchLang||"Your search";globalConfig.returnedNoResultLang=globalConfig.returnedNoResultLang||"returned no result";globalConfig.pleaseRefineSearchLang=globalConfig.pleaseRefineSearchLang||"Please refine your search";globalConfig.oneResultFoundLang=globalConfig.oneResultFoundLang||"1 result found";globalConfig.moreThanLang=globalConfig.moreThanLang||"More than";globalConfig.resultsFoundLang=globalConfig.resultsFoundLang||"results found";globalConfig.onlyLang=globalConfig.onlyLang||"Only";globalConfig.returnedLang=globalConfig.returnedLang||"returned";globalConfig.seeHelpLang=globalConfig.seeHelpLang||"See help for options to refine your search";globalConfig.disclaimerLang=globalConfig.disclaimerLang||'<p>This website and all of the information it contains are provided &quot;as is&quot; without warranty of any kind, whether express or implied. <a href="/environment/en/resources/collection/data_downloads/STDPROD_078135.html">View the terms of use</a>.</p>';globalConfig.InformationLang=globalConfig.InformationLang||"Information";globalConfig.CurrentMapDisplayLang=globalConfig.CurrentMapDisplayLang||"Search current map display only";globalConfig.CurrentMapDisplayTitleLang=globalConfig.CurrentMapDisplayTitleLang||"Current Map Display: Limit your search to the area displayed";globalConfig.distanceFieldNote=globalConfig.distanceFieldNote||"The Distance(KM) column represents the distance between your search location and the permit location in the specific row.";globalConfig.noCoordinatesTableTitleLang=globalConfig.noCoordinatesTableTitleLang||"The following table contains the records without valid coordinates. <a href='#WhyAmISeeingThis'>Why am I seeing this?</a>";globalConfig.whyAmISeeingThisLang=globalConfig.whyAmISeeingThisLang||"<a id='WhyAmISeeingThis'><strong>Why am I seeing this?</strong></a><br>The map locations shown as points have been determined by using addresses or other information to calculate a physical location on the map.  In some cases, the information needed to calculate a location was incomplete, incorrect or missing.  The records provided in the table have been included because there is a close match on the name or city/town or other field(s). These records may or may not be near your specified location, and users are cautioned in using these records. They have been included as potential matches only.";globalConfig.ThisResultDoesNotHaveValidCoordinates=globalConfig.ThisResultDoesNotHaveValidCoordinates||"This result does not have valid coordinates.";globalConfig.AmongReturnedResults=globalConfig.AmongReturnedResults||"Among returned results";globalConfig.ResultDoesNotHaveValidCoordinates=globalConfig.ResultDoesNotHaveValidCoordinates||" result does not have valid coordinates.";globalConfig.ResultsDoNotHaveValidCoordinates=globalConfig.ResultsDoNotHaveValidCoordinates||" results do not have valid coordinates.";globalConfig.youMaySearchByLang=globalConfig.youMaySearchByLang||"You may search by ";globalConfig.seeHelpForAdvancedOptionsLang=globalConfig.seeHelpForAdvancedOptionsLang||"or see help for advanced options."}else{globalConfig.SearchInteractiveMapFormLang=globalConfig.SearchInteractiveMapFormLang||"Recherche carte interactive forme";globalConfig.SearchInteractiveMapLang=globalConfig.SearchInteractiveMapLang||"Recherche dans la carte interactive";globalConfig.SearchLang=globalConfig.SearchLang||"Recherche";globalConfig.TermLang=globalConfig.TermLang||"Terme";globalConfig.InputBoxSizeLang=globalConfig.InputBoxSizeLang||"450px";globalConfig.degreeSymbolLang=globalConfig.degreeSymbolLang||"&deg;";globalConfig.selectTooltip=globalConfig.selectTooltip||globalConfig.selectTooltip||"Choisir";globalConfig.UTM_ZoneLang=globalConfig.UTM_ZoneLang||"Zone UTM";globalConfig.EastingLang=globalConfig.EastingLang||"abscisse";globalConfig.NorthingLang=globalConfig.NorthingLang||"ordonn\u00e9e";globalConfig.noResultFoundMsg=globalConfig.noResultFoundMsg||"Votre recherche n'a produit aucun r\u00e9sultat. Veuillez affiner la recherche.";globalConfig.searchCenterLang=globalConfig.searchCenterLang||"Cercle de recherche";globalConfig.searchRadiusLang=globalConfig.searchRadiusLang||"rayon de recherche";globalConfig.searchKMLang=globalConfig.searchKMLang||"km";globalConfig.totalFeatureReturnedLang=globalConfig.totalFeatureReturnedLang||"Nombre total de r\u00e9sultats";globalConfig.only1DisplayedLang=globalConfig.only1DisplayedLang||", only 1 is displayed.";globalConfig.westSymbolLang=globalConfig.westSymbolLang||"O";globalConfig.distanceLang=globalConfig.distanceLang||"Distance (en km)";globalConfig.searchingLang=globalConfig.searchingLang||"Recherche des r\u00e9sultats ...";globalConfig.inGobalRegionLang=globalConfig.inGobalRegionLang||"en Ontario";globalConfig.inCurrentMapExtentLang=globalConfig.inCurrentMapExtentLang||"dans l'affichage actuel de la carte";globalConfig.forLang="pour";globalConfig.yourSearchLang=globalConfig.yourSearchLang||"Votre recherche";globalConfig.returnedNoResultLang=globalConfig.returnedNoResultLang||"n'a donn\u00e9 aucun r\u00e9sultat";globalConfig.pleaseRefineSearchLang=globalConfig.pleaseRefineSearchLang||"S'il vous plait affiner votre recherche";globalConfig.oneResultFoundLang=globalConfig.oneResultFoundLang||"1 r\u00e9sultat";globalConfig.moreThanLang=globalConfig.moreThanLang||"Plus de";globalConfig.resultsFoundLang=globalConfig.resultsFoundLang||"r\u00e9sultats";globalConfig.onlyLang=globalConfig.onlyLang||"Seulement";globalConfig.returnedLang=globalConfig.returnedLang||"retourn\u00e9s";globalConfig.seeHelpLang=globalConfig.seeHelpLang||"Consulter l'aide pour affiner votre recherche";globalConfig.disclaimerLang=globalConfig.disclaimerLang||'<p>Ce site web et toute l&rsquo;information qu&rsquo;il contient sont fournis sans garantie quelconque, expr&egrave;s ou tacite. <a href="/environment/fr/resources/collection/data_downloads/STDPROD_078138.html">Voir l&rsquo;avis de non-responsabilit&eacute;</a>.</p>';globalConfig.InformationLang=globalConfig.InformationLang||"Information";globalConfig.CurrentMapDisplayLang=globalConfig.CurrentMapDisplayLang||"\u00c9tendue de la carte courante";globalConfig.CurrentMapDisplayTitleLang=globalConfig.CurrentMapDisplayTitleLang||"Afficher la carte : Limiter la recherche \u00e0 la carte donn\u00e9e.";globalConfig.distanceFieldNote=globalConfig.distanceFieldNote||"La colonne de distance (en km) donne la distance entre le lieu de votre recherche et le lieu du puits dans la rang\u00e9e donn\u00e9e.";globalConfig.noCoordinatesTableTitleLang=globalConfig.noCoordinatesTableTitleLang||"Le tableau suivant contient des données sans coordonnées valides.  <a href='#WhyAmISeeingThis'>Pourquoi cela s’affiche-t-il?</a>";globalConfig.whyAmISeeingThisLang=globalConfig.whyAmISeeingThisLang||"<a id='WhyAmISeeingThis'>Pourquoi cela s’affiche-t-il?</a><br>Les lieux indiqués par des points sur la carte ont été déterminés en fonction d’adresses ou d’autres renseignements servant à calculer un emplacement physique sur la carte. Dans certains cas, ces renseignements étaient incomplets, incorrects ou manquants. Les données fournies dans le deuxième tableau ont été incluses, car il y a une correspondance étroite avec le nom de la ville ou d’autre champ. Ces données peuvent ou non être proches du lieu précisé, et on doit les utiliser avec prudence. Elles ont été incluses seulement parce qu’il peut y avoir une correspondance.";globalConfig.ThisResultDoesNotHaveValidCoordinates=globalConfig.ThisResultDoesNotHaveValidCoordinates||"This result does not have valid coordinates.";globalConfig.AmongReturnedResults=globalConfig.AmongReturnedResults||"Parmi les résultats obtenus";globalConfig.ResultDoesNotHaveValidCoordinates=globalConfig.ResultDoesNotHaveValidCoordinates||" résultat n’a pas de coordonnées valides.";globalConfig.ResultsDoNotHaveValidCoordinates=globalConfig.ResultsDoNotHaveValidCoordinates||" résultats n’ont pas de coordonnées valides.";globalConfig.youMaySearchByLang=globalConfig.youMaySearchByLang||"Vous pouvez rechercher par ";globalConfig.seeHelpForAdvancedOptionsLang=globalConfig.seeHelpForAdvancedOptionsLang||"ou consulter l'aide pour de l'information sur les recherches avanc&eacute;es.";globalConfig.dataTableLang=globalConfig.dataTableLang||{sProcessing:"Traitement en cours...",sSearch:"Rechercher&nbsp;:",sLengthMenu:"Afficher _MENU_ &eacute;l&eacute;ments",sInfo:"Affichage de l'&eacute;lement _START_ &agrave; _END_ sur _TOTAL_ &eacute;l&eacute;ments",sInfoEmpty:"Affichage de l'&eacute;lement 0 &agrave; 0 sur 0 &eacute;l&eacute;ments",sInfoFiltered:"(filtr&eacute; de _MAX_ &eacute;l&eacute;ments au total)",sInfoPostFix:"",sLoadingRecords:"Chargement en cours...",sZeroRecords:"Aucun &eacute;l&eacute;ment &agrave; afficher",sEmptyTable:"Aucune donn&eacute;e disponible dans le tableau",oPaginate:{sFirst:"Premier",sPrevious:"Pr&eacute;c&eacute;dent",sNext:"Suivant",sLast:"Dernier"},oAria:{sSortAscending:": activer pour trier la colonne par ordre croissant",sSortDescending:": activer pour trier la colonne par ordre d&eacute;croissant"}}}globalConfig.u2019Lang="\u2019";globalConfig.nbspLang="&nbsp";var globalConfig=globalConfig||{};if(typeof console=="undefined"){window.console={log:function(){}}}if(!("trim" in String.prototype)){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c,d){var b;if(this==null){throw new TypeError('"this" is null or not defined')}var f=Object(this);var a=f.length>>>0;if(a===0){return -1}var g=+d||0;if(Math.abs(g)===Infinity){g=0}if(g>=a){return -1}b=Math.max(g>=0?g:a-Math.abs(g),0);while(b<a){var e;if(b in f&&f[b]===c){return b}b++}return -1}}if(!("contains" in Array.prototype)){Array.prototype.contains=function(a){return(this.indexOf(a)>=0)}}if(!("unique" in Array.prototype)){Array.prototype.unique=function(){var b=[];for(var a=0;a<this.length;a++){if(b.indexOf(this[a])<0){b.push(this[a])}}return b}}if(!Array.prototype.filter){Array.prototype.filter=function(b){if(this==null){throw new TypeError()}var f=Object(this);var a=f.length>>>0;if(typeof b!="function"){throw new TypeError()}var e=[];var d=arguments[1];for(var c=0;c<a;c++){if(c in f){var g=f[c];if(b.call(d,g,c,f)){e.push(g)}}}return e}}if(!Array.prototype.map){Array.prototype.map=function(j,h){var b,a,c;if(this===null){throw new TypeError(" this is null or not defined")}var e=Object(this);var f=e.length>>>0;if(typeof j!=="function"){throw new TypeError(j+" is not a function")}if(h){b=h}a=new Array(f);c=0;while(c<f){var d,g;if(c in e){d=e[c];g=j.call(b,d,c,e);a[c]=g}c++}return a}}if("function"!==typeof Array.prototype.reduce){Array.prototype.reduce=function(f,d){if(null===this||"undefined"===typeof this){throw new TypeError("Array.prototype.reduce called on null or undefined")}if("function"!==typeof f){throw new TypeError(f+" is not a function")}var a=0,b=this.length>>>0,c,e=false;if(1<arguments.length){c=d;e=true}for(;b>a;++a){if(!this.hasOwnProperty(a)){continue}if(e){c=f(c,this[a],a,this)}else{c=this[a];e=true}}if(!e){throw new TypeError("Reduce of empty array with no initial value")}return c}}Array.range=function(e,d,g){var c=[];if(typeof e=="number"){c[0]=e;g=g||1;while(e+g<=d){c[c.length]=e+=g}}else{var f="abcdefghijklmnopqrstuvwxyz";if(e===e.toUpperCase()){d=d.toUpperCase();f=f.toUpperCase()}f=f.substring(f.indexOf(e),f.indexOf(d)+1);c=f.split("")}return c};if(typeof Number.prototype.toRad=="undefined"){Number.prototype.toRad=function(){return this*Math.PI/180}}globalConfig.replaceChar=globalConfig.replaceChar||function(f,c,b){var d=[];d=f.split(c);var a=d[0];if(d.length>=2){for(var e=1;e<d.length;e++){a=a+b+d[e]}}return a};globalConfig.wordCapitalize=globalConfig.wordCapitalize||function(c){var a=c.trim().split(" ");for(var b=0;b<a.length;b++){a[b]=a[b].substring(0,1).toUpperCase()+a[b].substring(1,a[b].length).toLowerCase()}return a.join(" ")};globalConfig.convertLatLngtoUTM=globalConfig.convertLatLngtoUTM||function(j,M){var E=3.14159265358979;var G=6378137;var q=0.9996;var C=0.081819191;var d=0.006694380015894481;var b=6367449.146;var v=16038.42955;var B=16.83261333;var c=0.021984404;var z=0.000312705;var D=31+Math.floor(M/6);var f=j*E/180;var w=Math.sin(f);var t=C*w*C*w;var r=Math.cos(f);var p=Math.tan(f);var I=G/(Math.sqrt(1-t));var g=b*f-v*Math.sin(2*f)+B*Math.sin(4*f)-c*Math.sin(6*f)+z*Math.sin(8*f);var o=g*q;var n=I*w*r*q/2;var m=((I*w*t*t*t)/24)*(5-p*p+9*d*r*r+4*d*d*r*r*r*r)*q;var k=I*r*q;var h=r*r*r*(I/6)*(1-p*p+d*r*r)*q;var l=6*D-183;var L=(M-l)*E/180;var J=L*L;var H=J*L;var F=H*L;var u=500000+(k*L+h*H);var A=(o+n*J+m*F);var s=A;if(s<0){s=s+10000000}var K={Zone:D,Easting:u.toFixed(0),Northing:s.toFixed(0)};return K};globalConfig.convertUTMtoLatLng=globalConfig.convertUTMtoLatLng||function(r,t,w){var u=3.14159265358979;var Z=6378137;var B=0.9996;var X=0.081819191;var T=0.006694380015894481;var k=500000-w;var v=t/B;var S=T*T;var R=S*T;var N=Math.sqrt(1-T);var y=(1-N)/(1+N);var q=y*y;var o=q*y;var n=o*y;var J=3*y/2-27*o/32;var G=21*q/16-55*n/32;var F=151*o/96;var C=1097*n/512;var l=v/(Z*(1-T/4-3*S/64-5*R/256));var Q=l+J*Math.sin(2*l)+G*Math.sin(4*l)+F*Math.sin(6*l)+C*Math.sin(8*l);var V=Math.cos(Q);var x=Math.tan(Q);var j=x*x;var b=Math.sin(Q);var W=X*b;var K=1-W*W;var H=Math.sqrt(K);var c=Z/H;var P=Z*(1-T)/(K*H);var s=k/(c*B);var E=s*s;var A=E*E;var z=A*E;var h=c*x/P;var g=E/2;var f=(5+3*j+10*J-4*J*J-9*T)*A/24;var d=(61+90*j+298*J+45*j*j-252*T-3*J*J)*z/720;var O=s;var M=(1+2*j+J)*E*s/6;var I=(5-2*J+28*j-3*J*J+8*T+24*j*j)*A*s/120;var Y=(O-M+I)/V;var p=6*r-183;var m=180*(Q-h*(g+f+d))/u;var U=p-Y*180/u;var L={Latitude:m.toFixed(8),Longitude:U.toFixed(8)};return L};globalConfig.isInsidePolygon=globalConfig.isInsidePolygon||function(c,a){var f=c.lat();var h=c.lng();var g=a.length;var b=false;var d=g-1;for(var e=0;e<g;e++){var l={x:a[e].lng(),y:a[e].lat()};var k={x:a[d].lng(),y:a[d].lat()};if(l.x<h&&k.x>=h||k.x<h&&l.x>=h){if(l.y+(h-l.x)/(k.x-l.x)*(k.y-l.y)<f){b=!b}}d=e}return b};globalConfig.deciToDegree=globalConfig.deciToDegree||function(f){if(Math.abs(f)<=0.1){return"N/A"}var b="N";if(f<0){f=-f;b=globalConfig.westSymbolLang}var e=Math.floor(f);var a=(f-e)*60;var g=Math.floor(a);var c=((a-g)*60).toFixed(0);var d="";if(c<1){d=""+e+globalConfig.degreeSymbolLang+g+"'"}else{if(c>58){d=""+e+globalConfig.degreeSymbolLang+(g+1)+"'"}else{d=""+e+globalConfig.degreeSymbolLang+g+"'"+c+'"'}}return d+b};globalConfig.addBRtoLongText=function(f){var b=0;var e=false;if(f.length<=40){return f}var c=f.split("");var a="";for(var d=0;d<c.length;d++){if(b>40){e=true}a=a+c[d];if((e)&&(c[d]===" ")){b=0;a=a+"<br>";e=false}b=b+1}return a};globalConfig.processNA=function(a){if(typeof(a)==="undefined"){return"N/A"}if(a==="null"){return"N/A"}if(a==="Null"){return"N/A"}return a};var globalConfig=globalConfig||{};globalConfig.failedLocation=globalConfig.failedLocation||{positions:[[51.253775,-85.32321389999998],[42.832714,-80.279923]],difference:0.00001};globalConfig.regionBoundary=globalConfig.regionBoundary||[{x:-95.2992035,y:48.77505703},{x:-95.2992035,y:53.07150598},{x:-89.02502409,y:56.9587693},{x:-87.42238044,y:56.34499088},{x:-86.3653176,y:55.93580527},{x:-84.69447635,y:55.45842206},{x:-81.89837466,y:55.35612565},{x:-81.96657226,y:53.17380238},{x:-80.84131182,y:52.28723355},{x:-79.98884179,y:51.80985033},{x:-79.34096457,y:51.74165273},{x:-79.34096457,y:47.54750019},{x:-78.55669214,y:46.49043736},{x:-76.61306048,y:46.14944935},{x:-75.59009645,y:45.77436253},{x:-74.123848,y:45.91075774},{x:-73.98745279,y:45.02418891},{x:-75.07861443,y:44.61500329},{x:-75.86288685,y:44.03532368},{x:-76.88585089,y:43.69433566},{x:-79.2,y:43.450196},{x:-78.62488975,y:42.94416204},{x:-79.54555738,y:42.43268002},{x:-81.28459623,y:42.15988961},{x:-82.54625188,y:41.58020999},{x:-83.2623267,y:41.95529681},{x:-83.3646231,y:42.43268002},{x:-82.61444948,y:42.73956923},{x:-82.17116506,y:43.59203926},{x:-82.61444948,y:45.36517692},{x:-84.08069793,y:45.91075774},{x:-84.93316796,y:46.69503016},{x:-88.27485047,y:48.22947621},{x:-89.3319133,y:47.7861918},{x:-90.32077854,y:47.6838954},{x:-92.09391619,y:47.95668581},{x:-94.07164666,y:48.33177262},{x:-95.2992035,y:48.77505703}];globalConfig.TWPSearch=false;globalConfig.TWPLotConSearch=false;globalConfig.UTMRange=globalConfig.UTMRange||{minEasting:258030.3,maxEasting:741969.7,minNorthing:4614583.73,maxNorthing:6302884.09};globalConfig.locatorsAvailable=globalConfig.locatorsAvailable||{latlng:true,utm:true,township:true,address:true};globalConfig.validateLatLngWithRegion=globalConfig.validateLatLngWithRegion||function(d,c){var b=Math.min(d,c);var a=-Math.max(d,c);return{lat:b,lng:a}};globalConfig.isAddressEndsWithRegionName=globalConfig.isAddressEndsWithRegionName||function(a,c){if(a.length>c.length+1){var b=a.substring(a.length-c.length-1);if(b===(" "+c)||b===(","+c)){return true}}return false};globalConfig.regionAddressProcess=globalConfig.regionAddressProcess||function(e){var b=e.toUpperCase();var a=["ON","ONT","ONTARIO"];var d=false;for(var c=0;c<a.length;c++){if(globalConfig.isAddressEndsWithRegionName(b,a[c])){d=true}}if(!d){return e+" Ontario"}return e};globalConfig.defaultZone=globalConfig.defaultZone||17;globalConfig.geogTwpService=globalConfig.geogTwpService||{url:"https://www.giscoeservices.lrc.gov.on.ca/ArcGIS/rest/services/MOE/sportfishservice/MapServer",TWPLayerID:0,LotLayerID:1,latitude:"CENY",longitude:"CENX",TWPLayerNameField:"NAME",LotLayerNameFields:{TownshipField:"OFFICIAL_NAME_UPPER",LotField:"LOT_NUM_1",ConField:"CONCESSION_NUMBER"}};LOCATOR=(function(){var h=/^(-?\d+)(\.\d+)?$/;function b(o,r){var q=r;if(r>0){q=-q}var k=globalConfig.regionBoundary;var p=k.length;var l=false;var m=p-1;for(var n=0;n<p;n++){var t=k[n];var s=k[m];if(t.x<q&&s.x>=q||s.x<q&&t.x>=q){if(t.y+(q-t.x)/(s.x-t.x)*(s.y-t.y)<o){l=!l}}m=n}return l}function e(l,k){if(b(l,k)){return{latLng:new google.maps.LatLng(l,k),success:true}}else{return{success:false}}}function g(m,l){var k=globalConfig.UTMRange;return((m<k.maxEasting)&&(m>k.minEasting)&&(l<k.maxNorthing)&&(l>k.minNorthing))}function d(p,m,l){var n=[];n=p.split(m);var k=n[0];if(n.length>=2){for(var o=1;o<n.length;o++){k=k+l+n[o]}}return k}function c(o,u,l){var q=0;var p=0;var w=0;var r=[];for(var v=0;v<o.features.length;v++){var t=o.features[v].attributes;var m=0;for(var k=0;k<o.features[v].geometry.length;k++){var s=o.features[v].geometry[k];m=m+google.maps.geometry.spherical.computeArea(s.getPath());r.push(s)}p=p+(t[u]*m);q=q+(t[l]*m);w=w+m}var n=new google.maps.LatLng(p/w,q/w);return{gLatLng:n,polylines:r}}function f(k,r,n){var q=0;var o=0;for(var m=0;m<k.features.length;m++){var l=k.features[m].attributes;o=o+l[r];q=q+l[n]}var p=new google.maps.LatLng(o/k.features.length,q/k.features.length);return{gLatLng:p}}LATLNG_LOCATOR=(function(){function n(v,u){var t={lat:v,lng:u};t=globalConfig.validateLatLngWithRegion(v,u);return t}function k(u){if(h.test(u[0])&&h.test(u[1])){var w=Math.abs(parseFloat(u[0]));var v=Math.abs(parseFloat(u[1]));var t=n(w,v);return e(t.lat,t.lng)}else{return{success:false}}}function p(x,w){var v={ParsedNum:0,Unparsed:""};if(w.length===0){return v}var u=w.split(x);var t=0;if(u.length<=2){if(h.test(u[0])){t=parseFloat(u[0])}if(u.length===2){w=u[1]}else{w=""}}v={ParsedNum:t,Unparsed:w};return v}function o(u,A,z,y){var B=0;var x=p(A,u);var t=x.ParsedNum;x=p(z,x.Unparsed);var v=x.ParsedNum;x=p(y,x.Unparsed);var w=x.ParsedNum;if(t>0){B=t+v/60+w/3600}else{B=t-v/60-w/3600}B=Math.abs(B);return B}function s(u){var x=String.fromCharCode(176);if(((u[0]).indexOf(x)>0)&&((u[1]).indexOf(x)>0)){var w=o(u[0],x,"'",'"');var v=o(u[1],x,"'",'"');var t=n(w,v);return e(t.lat,t.lng)}else{return{success:false}}}function q(u){for(var t=0;t<=9;t++){if(u.indexOf(t+"D")>0){return 1}}return 0}function r(u){var x=(u[0]).toUpperCase();var w=(u[1]).toUpperCase();var v=q(x)*q(w);if(v>0){var z=o(x,"D","M","S");var y=o(w,"D","M","S");var t=n(z,y);return e(t.lat,t.lng)}else{return{success:false}}}function l(v,t){if(t.length!==2){return{success:false}}var u=k(t);if(!u.success){u=s(t)}if(!u.success){u=r(t)}if(u.success){v.gLatLng=u.latLng;v.callback(v)}return u}var m={process:l};return m})();UTM_LOCATOR=(function(){function l(o,p){if(o.length!==2){return{success:false}}if(h.test(o[0])&&h.test(o[1])){var u=Math.abs(parseFloat(o[0]));var s=Math.abs(parseFloat(o[1]));var r=Math.min(u,s);var q=Math.max(u,s);if(g(r,q)){var t=globalConfig.convertUTMtoLatLng(p,q,r);return e(t.Latitude,t.Longitude)}else{return{success:false}}}else{return{success:false}}}function n(s){var t={success:false};if(s.length!==3){return t}var q=(s[0]).replace(","," ").trim();var p=(s[1]).replace(","," ").trim();var o=(s[2]).replace(","," ").trim();if(h.test(q)&&h.test(p)&&h.test(o)){var u=[Math.abs(parseFloat(q)),Math.abs(parseFloat(p)),Math.abs(parseFloat(o))];u.sort(function(y,x){return y-x});var v=(u[0]).toString();var w=/^\d+$/;if(w.test(v)){if((u[0]>=15)&&(u[0]<=18)){if(g(u[1],u[2])){var r=globalConfig.convertUTMtoLatLng(u[0],u[2],u[1]);return e(r.Latitude,r.Longitude)}}}}return t}function m(q,o){var p=l(o,globalConfig.defaultZone);if(!p.success){p=n(o)}if(p.success){q.gLatLng=p.latLng;q.callback(q)}return p}var k={process:m};return k})();TWP_LOCATOR=(function(){function k(t){if(t.length!==2){return{TWP:"",Lot:"",Con:"",isTWPOnly:false,success:false}}var v=(t[0]).trim().split(/\s+/).join(" ");var q="";var s="";if(((t[1]).indexOf("LOT")>0)&&((t[1]).indexOf("CON")>0)){var r=((t[1]).trim()).split("CON");if((r[0]).length===0){var p=(r[1]).split("LOT");q=(p[0]).trim();s=(p[1]).trim()}else{var o=(r[0]).split("LOT");q=(r[1]).trim();s=(o[1]).trim()}}var u=false;if((q.length===0)&&(s.length===0)){u=true}return{TWP:v,Lot:s,Con:q,isTWPOnly:u,success:true}}function n(s){var r={TWP:"",Lot:"",Con:"",isTWPOnly:false,success:false};if(s.indexOf(" TWP")>0){r=k(s.split(" TWP"))}if(!r.success){if(s.indexOf(" TOWNSHIP")>0){r=k(s.split(" TOWNSHIP"))}}if(!r.success){if(s.indexOf("CANTON ")===0){var u=s.substring(7).trim();var q=u.indexOf(" LOT ");var o=u.indexOf(" CON ");var p=q;if(o<q){p=o}var t=[];if(p===-1){t.push(u);t.push("")}else{t.push(u.substring(0,p));t.push(u.substring(p))}r=k(t)}}return r}function m(s,q){var t=q.join(" ").toUpperCase();var u=n(t);if(u.success){var o=globalConfig.geogTwpService;var v={returnGeometry:true,outFields:[o.latitude,o.longitude]};var p;if(u.isTWPOnly){v.where=o.TWPLayerNameField+" = '"+u.TWP+"'";p=o.TWPLayerID;globalConfig.TWPSearch=true}else{v.where=o.LotLayerNameFields.TownshipField+" = '"+u.TWP+"' AND "+o.LotLayerNameFields.ConField+" = 'CON "+u.Con+"' AND "+o.LotLayerNameFields.LotField+" = 'LOT "+u.Lot+"'";p=o.LotLayerID;globalConfig.TWPLotConSearch=true}var r=new gmaps.ags.Layer(o.url+"/"+p);r.query(v,function(w){if(w.features.length>0){var x=c(w,o.latitude,o.longitude);s.gLatLng=x.gLatLng;s.polylines=x.polylines;s.zoomlevel=(u.isTWPOnly)?globalConfig.twpZoomLevel:globalConfig.lotConcessionZoomLevel;s.callback(s)}else{s.totalCount=0;globalConfig.resultFoundSimple(s)}});return{success:true}}else{return{success:false}}}var l={process:m};return l})();ADDRESS_LOCATOR=(function(){function k(n){if(n.length===2){if(h.test(n[0])&&h.test(n[1])){return true}var s=String.fromCharCode(176);if(((n[0]).indexOf(s)>0)&&((n[1]).indexOf(s)>0)){return true}var o=function(u){for(var t=0;t<=9;t++){if(u.indexOf(t+"D")>0){return 1}}return 0};var r=(n[0]).toUpperCase();var q=(n[1]).toUpperCase();var p=o(r)*o(q);if(p>0){return true}}return false}function m(o,n){if(k(n)){o.totalCount=0;globalConfig.resultFoundSimple(o);return}var q=new google.maps.Geocoder();var p=o.address;if(p.toUpperCase()==="ONTARIO"){o.totalCount=0;globalConfig.resultFoundSimple(o);return}p=globalConfig.regionAddressProcess(p);q.geocode({address:p},function(u,t){if(t===google.maps.GeocoderStatus.OK){var z=u.length;var w=true;for(var v=0;v<z;v++){var B=u[v].geometry.location;var y=globalConfig.failedLocation.positions;var x=globalConfig.failedLocation.difference;var r=false;for(var s=0;s<y.length;s++){var A=Math.abs(B.lat()-y[s][0])+Math.abs(B.lng()-y[s][1]);if(A<x){r=true;break}}if(r){continue}if(b(B.lat(),B.lng())){o.gLatLng=B;o.returnedAddress=u[v].formatted_address.toString();o.callback(o);w=false;break}}if(w){o.totalCount=0;globalConfig.resultFoundSimple(o)}}else{o.totalCount=0;globalConfig.resultFoundSimple(o)}})}var l={process:m};return l})();function j(x){var w=d(x.address,","," ").trim();var o=w.split(/\s+/);var u={success:false};if(typeof(globalConfig.locationServicesList)!=="undefined"){for(var r=0;r<globalConfig.locationServicesList.length;r++){var t=globalConfig.locationServicesList[r];if((!u.success)&&t.isInputFitRequirements(w)){u.success=true;t.returnGeometry=false;if(t.displayPolygon){t.returnGeometry=true}var k=t.fieldsInInfoWindow;k.push(t.latitude);k.push(t.longitude);var n={returnGeometry:t.returnGeometry,where:t.getSearchCondition(w),outFields:k};var s=new gmaps.ags.Layer(t.mapService+"/"+t.layerID);var v=t.getInfoWindow;var l=t.displayPolygon;var q=t.latitude;var p=t.longitude;s.query(n,function(y){var z=0;if(y){z=y.features.length;if(z>0){x.address=v(y.features[0].attributes);if(l){var A=c(y,q,p);x.gLatLng=A.gLatLng;x.polylines=A.polylines;x.callback(x)}else{var B=f(y,q,p);x.gLatLng=B.gLatLng;x.callback(x)}}else{return{success:false}}}else{return{success:false}}})}}}var m=globalConfig.locatorsAvailable;if((!u.success)&&m.latlng){u=LATLNG_LOCATOR.process(x,o)}if((!u.success)&&m.utm){u=UTM_LOCATOR.process(x,o)}if((!u.success)&&m.township){u=TWP_LOCATOR.process(x,o)}if((!u.success)&&m.address){u=ADDRESS_LOCATOR.process(x,o)}}var a={locate:j};return a})();TABS_CALCULATOR=(function(){function getRequiredFieldsFromOneString(infoWindowString,fields){var start=infoWindowString.indexOf("{");var end=infoWindowString.indexOf("}");if((start>=0)&&(end>=0)){var str1=infoWindowString.substring(0,start);var str2=infoWindowString.substring(start+1,end);var str3=infoWindowString.substring(end+1);var funStart=str2.indexOf("(");var funEnd=str2.indexOf(")");if((funStart>=0)&&(funEnd>=0)){var parameters=str2.substring(funStart+1,funEnd);var paraArray=parameters.split(",");for(var j=0;j<paraArray.length;j++){fields.push((paraArray[j]).trim())}}else{fields.push(str2.trim())}infoWindowString=getRequiredFieldsFromOneString(str3,fields)}return fields}function removeConditionInfoWindow(infoWindowString,attributes,start,end){var str1=infoWindowString.substring(0,start);var str2=infoWindowString.substring(start+1,end);var str3=infoWindowString.substring(end+1);var index=str2.indexOf("}");var fieldName=str2.substring(1,index);var str4=str2.substring(index+2);index=str4.indexOf("?");var result="";if(attributes[fieldName]>0){result=str1+str4.substring(index+1)}else{result=str1+str4.substring(0,index)}var start1=str3.indexOf("[");var end1=str3.indexOf("]");if((start1>=0)&&(end1>=0)){str3=removeConditionInfoWindow(str3,attributes,start1,end1)}result=result+str3;return result}function processNA(str){if(typeof(str)==="undefined"){return"N/A"}if(str==="null"){return"N/A"}if(str==="Null"){return"N/A"}return str}function getInfoWindowString(infoWindowString,attributes,start,end){var str1=infoWindowString.substring(0,start);var fieldName=infoWindowString.substring(start+1,end);var str3=infoWindowString.substring(end+1);var dataStr=" ";var funStart=fieldName.indexOf("(");var funEnd=fieldName.indexOf(")");if((funStart>=0)&&(funEnd>=0)){var funName=fieldName.substring(0,funStart);var parameters=fieldName.substring(funStart+1,funEnd);var paraArray=parameters.split(",");funName=funName+"(";for(var j=0;j<paraArray.length;j++){if((paraArray[j]).indexOf("'")===-1){var attrValue=attributes[(paraArray[j]).trim()];attrValue=processNA(attrValue);if(attrValue===null){attrValue="N/A"}if(typeof attrValue==="number"){funName=funName+attrValue}if(typeof attrValue==="string"){if(attrValue.indexOf("'")===-1){funName=funName+"'"+attrValue+"'"}else{if(attrValue.indexOf('"')===-1){funName=funName+'"'+attrValue+'"'}else{funName=funName+'"'+attrValue.replace('"','\\"')+'"'}}}}else{funName=funName+paraArray[j]}if(j<paraArray.length-1){funName=funName+","}}funName=funName+");";dataStr=eval(funName)}else{if(attributes[fieldName]!=="Null"){dataStr=attributes[fieldName]}}var start1=str3.indexOf("{");var end1=str3.indexOf("}");if((start1>=0)&&(end1>=0)){str3=getInfoWindowString(str3,attributes,start1,end1)}var result=str1+dataStr+str3;return result}function getInfoWindowContent(attributes,infoWindowString){var start=infoWindowString.indexOf("[");var end=infoWindowString.indexOf("]");if((start>=0)&&(end>=0)){infoWindowString=removeConditionInfoWindow(infoWindowString,attributes,start,end)}start=infoWindowString.indexOf("{");end=infoWindowString.indexOf("}");if((start>=0)&&(end>=0)){infoWindowString=getInfoWindowString(infoWindowString,attributes,start,end)}return infoWindowString}function getRequiredFields(tabs){var fields=[];for(var i=0;i<tabs.length;i++){var tab=tabs[i];fields=getRequiredFieldsFromOneString(tab.label,fields);fields=getRequiredFieldsFromOneString(tab.content,fields)}return fields.unique()}function getContent(attributes,tabs){var contents=[];for(var i=0;i<tabs.length;i++){var tab=tabs[i];var tabName=getInfoWindowContent(attributes,tab.label);if(tabName.trim().length>1){var tabContent=getInfoWindowContent(attributes,tab.content);contents.push({label:tabName,content:tabContent})}}return contents}var module={getContent:getContent,getRequiredFields:getRequiredFields};return module})();var globalConfig=globalConfig||{};globalConfig.testDivExist=globalConfig.testDivExist||function(a){return(!!document.getElementById(a))};globalConfig.disclaimerDivId=globalConfig.disclaimerDivId||"disclaimer";globalConfig.coordinatesDivId=globalConfig.coordinatesDivId||"coordinates";globalConfig.updateCoordinates=globalConfig.updateCoordinates||function(c,a){var b=globalConfig.convertLatLngtoUTM(c,a);document.getElementById(globalConfig.coordinatesDivId).innerHTML="Latitude:"+c.toFixed(5)+", Longitude:"+a.toFixed(5)+" ("+globalConfig.UTM_ZoneLang+":"+b.Zone+", "+globalConfig.EastingLang+":"+b.Easting+", "+globalConfig.NorthingLang+":"+b.Northing+")<br>"};if(typeof globalConfig.useSystemDefinedInit==="undefined"){globalConfig.useSystemDefinedInit=true}if(typeof globalConfig.allowMultipleIdentifyResult==="undefined"){globalConfig.allowMultipleIdentifyResult=true}if(typeof globalConfig.displayTotalIdentifyCount==="undefined"){globalConfig.displayTotalIdentifyCount=true}if(typeof globalConfig.isCoordinatesVisible==="undefined"){globalConfig.isCoordinatesVisible=true}globalConfig.orgLatitude=globalConfig.orgLatitude||49.764775;globalConfig.orgLongitude=globalConfig.orgLongitude||-85.323214;globalConfig.orgzoomLevel=globalConfig.orgzoomLevel||5;globalConfig.lotConcessionZoomLevel=globalConfig.lotConcessionZoomLevel||14;globalConfig.twpZoomLevel=globalConfig.twpZoomLevel||11;globalConfig.minMapScale=globalConfig.minMapScale||5;globalConfig.maxMapScale=globalConfig.maxMapScale||21;globalConfig.tableID=globalConfig.tableID||"myTable";globalConfig.tableWidth=globalConfig.tableWidth||650;if(!globalConfig.accessible){globalConfig.defaultMapTypeId=globalConfig.defaultMapTypeId||google.maps.MapTypeId.ROADMAP}globalConfig.accessibleTableClassName=globalConfig.accessibleTableClassName||"fishTable";globalConfig.generalTableClassName=globalConfig.generalTableClassName||"tablesorter";globalConfig.accessible=globalConfig.accessible||false;if(globalConfig.accessible){globalConfig.tableClassName=globalConfig.accessibleTableClassName}else{globalConfig.tableClassName=globalConfig.generalTableClassName}globalConfig.mapCanvasDivId=globalConfig.mapCanvasDivId||"map_canvas";globalConfig.opacity=globalConfig.opacity||1;globalConfig.locationTypeSelectionDivId=globalConfig.locationTypeSelectionDivId||"locationType";globalConfig.radiusSelectionDivId=globalConfig.radiusSelectionDivId||"lstRadius";globalConfig.businessTypeParameter=globalConfig.businessTypeParameter||"Business";globalConfig.searchBusinessDivId=globalConfig.searchBusinessDivId||"searchBusiness";globalConfig.searchLocationDivId=globalConfig.searchLocationDivId||"searchLocation";globalConfig.searchInputBoxDivId=globalConfig.searchInputBoxDivId||"map_query";globalConfig.currentMapExtentDivId=globalConfig.currentMapExtentDivId||"currentMapExtent";globalConfig.preInitialize=globalConfig.preInitialize||function(){};globalConfig.postInitialize=globalConfig.postInitialize||function(a){if(document.getElementById(globalConfig.searchBusinessDivId)){document.getElementById(globalConfig.searchBusinessDivId).checked=true}if(document.getElementById(globalConfig.searchLocationDivId)){document.getElementById(globalConfig.searchLocationDivId).checked=false}if(document.getElementById(globalConfig.radiusSelectionDivId)){document.getElementById(globalConfig.radiusSelectionDivId).disabled=true}if(document.getElementById(globalConfig.searchInputBoxDivId)){document.getElementById(globalConfig.searchInputBoxDivId).focus()}};globalConfig.searchChange=globalConfig.searchChange||function(a){if(a===globalConfig.businessTypeParameter){document.getElementById(globalConfig.radiusSelectionDivId).disabled=true}else{document.getElementById(globalConfig.radiusSelectionDivId).disabled=false}};globalConfig.search=globalConfig.search||function(){var c=document.getElementById(globalConfig.searchInputBoxDivId).value.trim();if(c.length===0){return}document.getElementById(globalConfig.queryTableDivId).innerHTML="";MOEMAP.clearOverlays();if(document.getElementById(globalConfig.searchBusinessDivId).checked){c=c.toUpperCase();c=globalConfig.replaceChar(c,"'","''");c=globalConfig.replaceChar(c,globalConfig.u2019Lang,"''");var b=globalConfig.attributeSearchItems;MOEMAP.queryLayerWithFuzzyMatch(b[0].field,c);return}if(document.getElementById(globalConfig.searchLocationDivId).checked){var a=document.getElementById(globalConfig.radiusSelectionDivId).value;MOEMAP.queryLayerWithLocationRadius(c,a)}};globalConfig.extraImageService=globalConfig.extraImageService||{id:"arcgis",name:"ESRI",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",visible:true};globalConfig.entsub=globalConfig.entsub||function(a){if(a&&a.which===13){globalConfig.search()}else{return true}};globalConfig.searchTheMapDivId=globalConfig.searchTheMapDivId||"searchTheMap";globalConfig.searchHelpDivId=globalConfig.searchHelpDivId||"searchHelp";globalConfig.informationDivId=globalConfig.informationDivId||"information";globalConfig.createTablesInfoWindows=globalConfig.createTablesInfoWindows||function(b){var a=function(c){return{label:c.label,head:"<table class='tabtable'><tr><th>"+c.content.map(function(d){return d.name}).join("</th><th>")+"</th></tr>",content:"<tr><td>"+c.content.map(function(d){return d.value}).join("</td><td>")+"</td></tr>",tail:"</table>"}};return b.map(a)};globalConfig.createTableBelowMap=globalConfig.createTableBelowMap||function(a){return{head:a.title+'<table id="'+globalConfig.tableID+'" class="'+globalConfig.tableClassName+'" width="'+globalConfig.tableWidth+'" border="0" cellpadding="0" cellspacing="1"><thead><tr><th><center>'+a.content.map(function(c){return c.name}).join("</center></th><th><center>")+"</center></th></tr></thead><tbody>",content:"<tr><td>"+a.content.map(function(c){return c.value}).join("</td><td>")+"</td></tr>",tail:"</tbody></table>"}};globalConfig.noCoordinatesTableID=globalConfig.noCoordinatesTableID||"noCoordinatesTable";globalConfig.createNoCoordinatesTableBelowMap=globalConfig.createNoCoordinatesTableBelowMap||function(a){return{head:globalConfig.noCoordinatesTableTitleLang+'<table id="'+globalConfig.noCoordinatesTableID+'" class="'+globalConfig.tableClassName+'" width="'+globalConfig.tableWidth+'" border="0" cellpadding="0" cellspacing="1"><thead><tr><th><center>'+a.content.map(function(c){return c.name}).join("</center></th><th><center>")+"</center></th></tr></thead><tbody>",content:"<tr><td>"+a.content.map(function(c){return c.value}).join("</td><td>")+"</td></tr>",tail:"</tbody></table>"}};globalConfig.chooseLang=globalConfig.chooseLang||function(b,a){return(globalConfig.language==="EN")?b:a};if((globalConfig.searchableFieldsList)&&(!globalConfig.searchHelpTxt)){globalConfig.searchHelpTxt=globalConfig.youMaySearchByLang;for(var i=0;i<globalConfig.searchableFieldsList.length-1;i++){globalConfig.searchHelpTxt=globalConfig.searchHelpTxt+"<strong>"+globalConfig.chooseLang(globalConfig.searchableFieldsList[i].en,globalConfig.searchableFieldsList[i].fr)+"</strong>, "}globalConfig.searchHelpTxt=globalConfig.searchHelpTxt+"<strong>"+globalConfig.chooseLang(globalConfig.searchableFieldsList[i].en,globalConfig.searchableFieldsList[i].fr)+"</strong> "+globalConfig.seeHelpForAdvancedOptionsLang}globalConfig.searchControlHTMLGenerator=globalConfig.searchControlHTMLGenerator||function(){return'<div id="searchTheMap"></div><div id="searchHelp"></div><br>			<label class="element-invisible" for="map_query">'+globalConfig.chooseLang("Search the map","Recherche carte interactive")+'</label>			<input id="map_query" type="text" title="'+globalConfig.chooseLang("Search term","Terme de recherche")+'" maxlength="100" size="50" onkeypress="return globalConfig.entsub(event)"></input>			<label class="element-invisible" for="search_submit">'+globalConfig.chooseLang("Search","Recherche")+'</label>			<input id="search_submit" type="submit" title="'+globalConfig.chooseLang("Search","Recherche")+'" onclick="globalConfig.search()" value="'+globalConfig.chooseLang("Search","Recherche")+'"></input>			<br/>			<input id="currentMapExtent" type="checkbox" name="currentExtent" title="'+globalConfig.chooseLang("Current Map Display","Étendue de la carte courante")+'" /> <label for="currentExtent" class=\'option\'>'+globalConfig.chooseLang("Search current map display only","\u00c9tendue de la carte courante")+'</label>			<div id="information"></div>'};if(!globalConfig.hasOwnProperty("searchControlHTML")){globalConfig.searchControlHTML=globalConfig.searchControlHTMLGenerator()}INITIALIZATION=(function(){function a(){if((!globalConfig.hasOwnProperty("queryLayerList"))&&globalConfig.hasOwnProperty("identifyMultiplePolygonLayersServicesTemplate")){globalConfig.queryLayerList=globalConfig.identifyMultiplePolygonLayersServicesTemplate.layerList;if(globalConfig.identifyMultiplePolygonLayersServicesTemplate.hasOwnProperty("merge")){globalConfig.mergeFunction=globalConfig.identifyMultiplePolygonLayersServicesTemplate.merge}}else{var h=function(l){var n=function(t,v){var o=t.indexOf("{");var q=t.indexOf("}");if((o>=0)&&(q>=0)){var u=t.substring(0,o);var s=t.substring(o+1,q);var p=t.substring(q+1);var w=s.indexOf("(");var x=s.indexOf(")");if((w>=0)&&(x>=0)){var z=s.substring(w+1,x);var y=z.split(",");for(var r=0;r<y.length;r++){v.push((y[r]).trim())}}else{v.push(s.trim())}t=n(p,v)}return v};var j=[];for(var k=0;k<l.length;k++){var m=l[k];j=n(m.label,j);j=n(m.content,j)}return j.unique()};for(var e=0;e<globalConfig.queryLayerList.length;e++){var g=globalConfig.queryLayerList[e];if((!g.hasOwnProperty("tabsTemplate"))&&g.hasOwnProperty("tabsTableTemplate")){g.tabsTemplate=globalConfig.createTablesInfoWindows(g.tabsTableTemplate)}var f=[];if(g.hasOwnProperty("tabsTemplate")){f=h(g.tabsTemplate)}if((!g.hasOwnProperty("tableTemplate"))&&g.hasOwnProperty("tableSimpleTemplate")){g.tableTemplate=globalConfig.createTableBelowMap(g.tableSimpleTemplate);g.noCoordinatesTableTemplate=globalConfig.createNoCoordinatesTableBelowMap(g.tableSimpleTemplate)}if(g.hasOwnProperty("tableTemplate")){var d=h([{label:globalConfig.InformationLang,content:g.tableTemplate.content}]);if(f.length===0){f=d.unique()}else{f=f.concat(d).unique()}}globalConfig.queryLayerList[e].outFields=f}}}function c(){var h;if(typeof(globalConfig.preInitialize)!=="undefined"){globalConfig.preInitialize()}if(typeof(globalConfig.selfDefinedInitialize)!=="undefined"){globalConfig.selfDefinedInitialize()}else{a();if(!globalConfig.accessible){var e={zoom:globalConfig.orgzoomLevel,center:new google.maps.LatLng(globalConfig.orgLatitude,globalConfig.orgLongitude),scaleControl:true,streetViewControl:true,mapTypeId:globalConfig.defaultMapTypeId};var j=globalConfig.extraImageService;if(j.visible){e.mapTypeControlOptions={mapTypeIds:[j.id,google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.HYBRID,google.maps.MapTypeId.TERRAIN]}}h=new google.maps.Map(document.getElementById(globalConfig.mapCanvasDivId),e);if(j.visible){var f=new gmaps.ags.MapType(j.url,{name:j.name});h.mapTypes.set(j.id,f)}if(typeof(globalConfig.url)!=="undefined"){var d=new gmaps.ags.MapService(globalConfig.url);var g=new gmaps.ags.MapOverlay(d,{opacity:globalConfig.opacity});g.setMap(h)}if(typeof(globalConfig.tileLayerService)!=="undefined"){var f=new gmaps.ags.MapType(globalConfig.tileLayerService.url,{name:globalConfig.tileLayerService.name,opacity:globalConfig.tileLayerService.opacity});h.overlayMapTypes.insertAt(0,f)}MOEMAP.init(h);TOOLSLEGEND.init(h);globalConfig.updateCoordinates(globalConfig.orgLatitude,globalConfig.orgLongitude)}if(typeof globalConfig.searchControlHTML!=="undefined"){globalConfig.searchControlDivId=globalConfig.searchControlDivId||"searchControl";if(globalConfig.testDivExist(globalConfig.searchControlDivId)){document.getElementById(globalConfig.searchControlDivId).innerHTML=globalConfig.searchControlHTML}}if(typeof globalConfig.otherInfoHTML!=="undefined"){globalConfig.otherInfoDivId=globalConfig.otherInfoDivId||"otherInfo";if(globalConfig.testDivExist(globalConfig.otherInfoDivId)){document.getElementById(globalConfig.otherInfoDivId).innerHTML=globalConfig.otherInfoHTML}}if(typeof globalConfig.applicationTitle!=="undefined"){globalConfig.applicationTitleDivId=globalConfig.applicationTitleDivId||"applicationTitle";if(globalConfig.testDivExist(globalConfig.applicationTitleDivId)){document.getElementById(globalConfig.applicationTitleDivId).innerHTML=globalConfig.applicationTitle}}if(globalConfig.testDivExist(globalConfig.searchTheMapDivId)){document.getElementById(globalConfig.searchTheMapDivId).innerHTML="<h2>"+globalConfig.SearchInteractiveMapLang+"</h2>"}if(globalConfig.testDivExist(globalConfig.searchHelpDivId)){document.getElementById(globalConfig.searchHelpDivId).innerHTML=globalConfig.searchHelpTxt}if((typeof(globalConfig.disclaimerLang)!=="undefined")&&globalConfig.displayDisclaimer&&globalConfig.testDivExist(globalConfig.disclaimerDivId)){document.getElementById(globalConfig.disclaimerDivId).innerHTML=globalConfig.disclaimerLang}}if(typeof(globalConfig.postInitialize)!=="undefined"){globalConfig.postInitialize(h)}}var b={init:c};return b})();if(globalConfig.useSystemDefinedInit){window.onload=INITIALIZATION.init}var globalConfig=globalConfig||{};globalConfig.imageURL="https://www.ontario.ca/sites/default/files/moe_mapping/mapping/js/MOEMap/images/";globalConfig.legend=globalConfig.legend||{available:false,url:globalConfig.imageURL+"legend.png",size:{width:270,height:81},location:{ratioX:0.01,ratioY:0.25}};globalConfig.pointBufferTool=globalConfig.pointBufferTool||{available:true,upIcon:globalConfig.imageURL+"Bptu.png",downIcon:globalConfig.imageURL+"Bptd.png",size:{width:31,height:31},location:{ratioX:0.12,ratioY:0.98}};TOOLSLEGEND=(function(){var g,e;var a;function k(t){var m=globalConfig.pointBufferTool;var l=a.getBounds();var s=l.getSouthWest();var p=l.getNorthEast();var o=p.lat()-s.lat();var q=p.lng()-s.lng();var r="";if(t){r=m.downIcon}else{r=m.upIcon}var n=new google.maps.MarkerImage(r,new google.maps.Size(m.size.width,m.size.height),new google.maps.Point(0,0),new google.maps.Point(0,0),new google.maps.Size(m.size.width,m.size.height));if(g){g.setMap(null)}g=new google.maps.Marker({position:new google.maps.LatLng(s.lat()+m.location.ratioY*o,s.lng()+m.location.ratioX*q),icon:n,title:globalConfig.selectTooltip,map:a})}function h(){var l=globalConfig.pointBufferTool;if(g&&(g.icon.url===l.downIcon)){return true}return false}function f(l,p,o){var n=globalConfig.legend;if(n.available){var q=new google.maps.LatLng(l.lat()+n.location.ratioY*p,l.lng()+n.location.ratioX*o);if(e){e.setMap(null)}var m=new google.maps.MarkerImage(n.url,new google.maps.Size(n.size.width,n.size.height),new google.maps.Point(0,0),new google.maps.Point(0,0),new google.maps.Size(n.size.width,n.size.height));e=new google.maps.Marker({position:q,icon:m,map:a})}}function b(){var m=globalConfig.pointBufferTool;if(typeof(m)!=="undefined"){if(m.available){k(false);var l="";(function(n,o){google.maps.event.addListener(o,"click",function(){k(true)})})(l,g)}}}function d(){var m=a.getBounds();var l=m.getSouthWest();var p=m.getNorthEast();var o=p.lat()-l.lat();var n=p.lng()-l.lng();f(l,o,n);b()}function j(l){a=l;google.maps.event.addListener(a,"bounds_changed",d)}var c={init:j,isPointBufferToolSelected:h,setPointBufferTool:k};return c})();var globalConfig=globalConfig||{};globalConfig.drawingCircleMessage=globalConfig.drawingCircleMessage||function(c,b,a){document.getElementById(globalConfig.informationDivId).innerHTML=globalConfig.searchCenterLang+" (latitude:"+c.toFixed(6)+", longitude:"+b.toFixed(6)+"), "+globalConfig.searchRadiusLang+" ("+a.toFixed(2)+" "+globalConfig.searchKMLang+")"};globalConfig.totalFeatureReturned=globalConfig.totalFeatureReturned||function(a){return globalConfig.totalFeatureReturnedLang+": <strong>"+a+"</strong>"};globalConfig.totalFeatureReturnedOnlyOneDisplayed=globalConfig.totalFeatureReturnedOnlyOneDisplayed||function(a){return globalConfig.totalFeatureReturnedLang+": <strong>"+a+"</strong>"+globalConfig.only1DisplayedLang};globalConfig.maxQueryReturn=globalConfig.maxQueryReturn||500;globalConfig.resultFound=globalConfig.resultFound||function(b,a){var c={totalCount:a};globalConfig.resultFoundSimple(c)};globalConfig.resultFoundSimple=globalConfig.resultFoundSimple||function(d){var c=d.searchString;var b=d.totalCount;var f="";if(typeof(d.withinExtent)!=="undefined"){f=" "+(d.withinExtent?globalConfig.inCurrentMapExtentLang:globalConfig.inGobalRegionLang)}var c=" ";if(typeof(d.searchString)!=="undefined"){c=" "}var e="";if(d.hasOwnProperty("invalidCount")&&(d.invalidCount>0)){var a=(d.invalidCount===1)?globalConfig.ResultDoesNotHaveValidCoordinates:globalConfig.ResultsDoNotHaveValidCoordinates;if(b===0){e=globalConfig.yourSearchLang+c+globalConfig.returnedNoResultLang+f+". "+globalConfig.pleaseRefineSearchLang+"."}else{if(b===1){e=globalConfig.oneResultFoundLang+c+f+"."+globalConfig.ThisResultDoesNotHaveValidCoordinates}else{if(b>=globalConfig.maxQueryReturn){e=globalConfig.moreThanLang+" "+globalConfig.maxQueryReturn+" "+globalConfig.resultsFoundLang+c+f+". "+globalConfig.onlyLang+" "+globalConfig.maxQueryReturn+" "+globalConfig.returnedLang+". "+globalConfig.seeHelpLang+"."+globalConfig.AmongReturnedResults+", "+d.invalidCount+a}else{e=b+" "+globalConfig.resultsFoundLang+c+f+". "+globalConfig.AmongReturnedResults+", "+d.invalidCount+a}}}}else{if(b===0){e=globalConfig.yourSearchLang+c+globalConfig.returnedNoResultLang+f+". "+globalConfig.pleaseRefineSearchLang+"."}else{if(b===1){e=globalConfig.oneResultFoundLang+c+f+"."}else{if(b>=globalConfig.maxQueryReturn){e=globalConfig.moreThanLang+" "+globalConfig.maxQueryReturn+" "+globalConfig.resultsFoundLang+c+f+". "+globalConfig.onlyLang+" "+globalConfig.maxQueryReturn+" "+globalConfig.returnedLang+". "+globalConfig.seeHelpLang+"."}else{e=b+" "+globalConfig.resultsFoundLang+c+f+"."}}}}document.getElementById(globalConfig.informationDivId).innerHTML="<i>"+e+"</i>"};globalConfig.noResultFound=globalConfig.noResultFound||function(){document.getElementById(globalConfig.informationDivId).innerHTML="<i>"+globalConfig.noResultFoundMsg+"</i>"};globalConfig.searchInProgress=globalConfig.searchInProgress||function(){document.getElementById(globalConfig.informationDivId).innerHTML="<i>"+globalConfig.searchingLang+"</i>"};globalConfig.maxQueryZoomLevel=globalConfig.maxQueryZoomLevel||17;globalConfig.maxQueryZoomLevelTWPSearch=globalConfig.maxQueryZoomLevelTWPSearch||11;globalConfig.maxQueryZoomLevelTWPLotConSearch=globalConfig.maxQueryZoomLevelTWPLotConSearch||14;globalConfig.queryTableDivId=globalConfig.queryTableDivId||"query_table";if(typeof globalConfig.usejQueryUITable==="undefined"){globalConfig.usejQueryUITable=true}var resourceURL="https://www.ontario.ca/sites/default/files/moe_mapping/mapping/js/MOEMap/";if(globalConfig.usejQueryUITable&&(!globalConfig.accessible)&&(!!yepnope)){yepnope({load:resourceURL+"css/jquery.dataTables.css",callback:function(){}});yepnope({load:resourceURL+"js/jquery.dataTables.js",callback:function(){}})}if(typeof globalConfig.usePredefinedMultipleTabs==="undefined"){globalConfig.usePredefinedMultipleTabs=true}if(globalConfig.usePredefinedMultipleTabs&&(!globalConfig.accessible)&&(!!yepnope)){yepnope({load:resourceURL+"css/multipletabs.css",callback:function(){}});yepnope({load:resourceURL+"js/closure-library-multipletabs-min.js",callback:function(){}})}globalConfig.searchedLocationIcon=globalConfig.searchedLocationIcon||"https://gmaps-samples.googlecode.com/svn/trunk/markers/blue/blank.png";globalConfig.twpBoundary=globalConfig.twpBoundary||{color:"#8583f3",opacity:1,weight:4};globalConfig.pointBuffer=globalConfig.pointBuffer||{color:"#FF0000",opacity:1,weight:2};globalConfig.identifyMarkerRedTearDrop=globalConfig.identifyMarkerRedTearDrop||false;globalConfig.identifyRadiusZoomLevelList=globalConfig.identifyRadiusZoomLevelList||{21:0.001,20:0.001,19:0.002,18:0.003,17:0.005,16:0.01,15:0.02,14:0.05,13:0.08,12:0.16,11:0.3,10:0.6,9:1.2,8:2.4,7:4.8,6:9.6,5:20,4:40,3:80,2:160,1:320};globalConfig.preIdentifyCallbackName=globalConfig.preIdentifyCallbackName||"Wells";globalConfig.preIdentifyCallbackList=globalConfig.preIdentifyCallbackList||{Wells:function(b){var a=globalConfig.identifyRadiusZoomLevelList[b.map.getZoom()];var e=b.layerList[b.currentLayerId];var c=globalConfig.calculateCirclePolyline(b.gLatLng,a*1000);var d={returnGeometry:false,outFields:e.outFields,geometry:new google.maps.Polygon({paths:c.getPath()}),geometryType:"esriGeometryPolygon"};return d},SWPLocator:function(a){var c=a.layerList[a.currentLayerId];var b={returnGeometry:c.hasOwnProperty("returnGeometry")?c.returnGeometry:false,geometryType:"esriGeometryPoint",geometry:a.gLatLng,outFields:c.returnFields};return b}};globalConfig.preIdentifyCallback=globalConfig.preIdentifyCallback||globalConfig.preIdentifyCallbackList[globalConfig.preIdentifyCallbackName];globalConfig.createControllableInfoWindowContent=function(b){var a=document.createElement("div");a.style.width=globalConfig.infoWindowWidth;if(globalConfig.hasOwnProperty("infoWindowHeight")){a.style.height=globalConfig.infoWindowHeight}a.innerHTML=b;return a};globalConfig.postIdentifyCallbackName=globalConfig.postIdentifyCallbackName||"Wells";globalConfig.postIdentifyCallbackList=globalConfig.postIdentifyCallbackList||{Wells:function(c){var b=Array.range(0,c.layerList.length-1).reduce(function(e,f){var d=c.layerList[f].result;if(d.hasOwnProperty("features")){return e.concat(d.features)}else{return e}},[]);if(b.length===0){return}var a=globalConfig.calculateMulitpleTabsOneFeature(b,c.layerList[0].tabsTemplate);MOEMAP.openInfoWindow(c.gLatLng,a)},SportFish:function(e){var d=Array.range(0,e.layerList.length-1).reduce(function(g,h){var f=e.layerList[h].result;if(f.hasOwnProperty("features")){return g.concat(f.features)}else{return g}},[]);if(d.length===0){return}var c=e.layerList[0].tabsTemplate;var b=TABS_CALCULATOR.getContent(d[0].attributes,c);var a=globalConfig.createControllableInfoWindowContent(b[0].content);MOEMAP.openInfoWindow(e.gLatLng,a)},SWPLocatorReverseGeocoding:function(a){if(globalConfig.avoidReverseGeocoding){globalConfig.avoidReverseGeocoding=false;globalConfig.postIdentifyCallbackList.SWPLocator(a)}else{var b=new google.maps.Geocoder();var c=a.gLatLng;b.geocode({address:c.lat()+","+c.lng()},function(e,d){if(d===google.maps.GeocoderStatus.OK){globalConfig.returnedAddress=e[0].formatted_address.toString();globalConfig.postIdentifyCallbackList.SWPLocator(a)}else{alert("Geocode was not successful for the following reason: "+d)}})}},SWPLocator:function(g){MOEMAP.clearOverlays();var h=g.layerList;var a="";if(g.hasOwnProperty("mergeFunction")){a=g.mergeFunction(g.gLatLng)}else{a=Array.range(0,h.length-1).map(function(j){var k=h[j]["result"].features;if(k.length>0){return Array.range(0,k.length-1).map(function(l){return h[j].callback(k[l].attributes)+"<br>"}).join("")}else{return""}}).join("")}var e=globalConfig.identifyMarkerRedTearDrop?(new google.maps.Marker({position:g.gLatLng,draggable:true})):(new google.maps.Marker({position:g.gLatLng,icon:globalConfig.searchedLocationIcon,draggable:true}));MOEMAP.addOverlay(e);a=globalConfig.createControllableInfoWindowContent(a);MOEMAP.openInfoWindow(g.gLatLng,a);(function(j,k){google.maps.event.addListener(k,"click",function(){MOEMAP.openInfoWindow(k.getPosition(),j)})})(a,e);google.maps.event.addListener(e,"dragend",function(){MOEMAP.clearOverlays();if(document.getElementById(globalConfig.searchInputBoxDivId)){document.getElementById(globalConfig.searchInputBoxDivId).value="";document.getElementById(globalConfig.searchInputBoxDivId).focus()}if(document.getElementById(globalConfig.queryTableDivId)){document.getElementById(globalConfig.queryTableDivId).innerHTML=""}var j=new google.maps.Geocoder();var k=e.getPosition();g.map.setCenter(k);j.geocode({address:k.lat()+","+k.lng()},function(m,l){if(l===google.maps.GeocoderStatus.OK){globalConfig.returnedAddress=m[0].formatted_address.toString();MOEMAP.mouseClickHandler({latLng:k})}else{alert("Geocode was not successful for the following reason: "+l)}})});for(var d=0;d<h.length;d++){if(h[d].hasOwnProperty("displayPolygon")&&(h[d].displayPolygon)){var f=h[d]["result"].features;for(var c=0;c<f.length;c++){var b=f[c].geometry[0];b.setOptions(h[d].style);MOEMAP.addOverlay(b)}}}if(globalConfig.testDivExist(globalConfig.queryTableDivId)){document.getElementById(globalConfig.queryTableDivId).innerHTML="<br>"+a.innerHTML}}};globalConfig.postIdentifyCallback=globalConfig.postIdentifyCallback||globalConfig.postIdentifyCallbackList[globalConfig.postIdentifyCallbackName];globalConfig.preBufferCallbackName=globalConfig.preBufferCallbackName||"Wells";globalConfig.preBufferCallbackList=globalConfig.preBufferCallbackList||{Wells:function(c){var a=c.radius;var b=globalConfig.createMarker(c.gLatLng,""+c.gLatLng.lat().toFixed(5)+", "+c.gLatLng.lng().toFixed(5),globalConfig.searchedLocationIcon);MOEMAP.addOverlay(b);var g=c.layerList[c.currentLayerId];var e=globalConfig.calculateCirclePolyline(c.gLatLng,a*1000);var d=globalConfig.calculatePolylineBounds(e);globalConfig.setMapBound(c.map,d);MOEMAP.addOverlay(e);var f={returnGeometry:true,outFields:g.outFields,geometry:new google.maps.Polygon({paths:e.getPath()}),geometryType:"esriGeometryPolygon"};if(c.hasOwnProperty("where")){f.where=c.where}return f}};globalConfig.preBufferCallback=globalConfig.preBufferCallback||globalConfig.preBufferCallbackList[globalConfig.preBufferCallbackName];globalConfig.postBufferCallbackName=globalConfig.postBufferCallbackName||"Wells";globalConfig.postBufferCallbackList=globalConfig.postBufferCallbackList||{Wells:function(c){var b=Array.range(0,c.layerList.length-1).reduce(function(e,f){var d=c.layerList[f].result;if(d.hasOwnProperty("features")){return e.concat(d.features)}else{return e}},[]);if(b.length===0){c.totalCount=0;globalConfig.resultFoundSimple(c);return}globalConfig.addMarkers(b,c.layerList[0].tabsTemplate);var a={coordinatesTable:c.layerList[0].tableTemplate,noCoordinatesTable:c.layerList[0].noCoordinatesTableTemplate};globalConfig.renderTable(b,a,c.gLatLng);c.totalCount=b.length;globalConfig.resultFoundSimple(c)}};globalConfig.postBufferCallback=globalConfig.postBufferCallback||globalConfig.postBufferCallbackList[globalConfig.postBufferCallbackName];globalConfig.addMarkers=globalConfig.addMarkers||function(f,e){var d=globalConfig.calculateClusters(f);for(var a=0;a<d.length;a++){var g=d[a].gLatLng;var c=globalConfig.calculateMulitpleTabsOneFeature(d[a].list,e);var b=new google.maps.Marker({position:g});(function(j,h){google.maps.event.addListener(h,"click",function(){MOEMAP.openInfoWindow(h.getPosition(),j)})})(c,b);MOEMAP.addOverlay(b)}};globalConfig.addMarkersSimple=globalConfig.addMarkersSimple||function(f,e){for(var a=0;a<f.length;a++){var g=f[a].geometry[0].getPosition();var d=TABS_CALCULATOR.getContent(f[a].attributes,e);var c=globalConfig.createControllableInfoWindowContent(d[0].content);var b=new google.maps.Marker({position:g});(function(j,h){google.maps.event.addListener(h,"click",function(){MOEMAP.openInfoWindow(h.getPosition(),j)})})(c,b);MOEMAP.addOverlay(b)}};globalConfig.renderTable=function(b,m,d){var c=m.coordinatesTable;var k=m.noCoordinatesTable;var a=b.filter(globalConfig.validFeaturesFilter);var h=b.filter(function(q){return !globalConfig.validFeaturesFilter(q)});var f=c.head;var p=(typeof(d)!=="undefined");if(p){var l=c.head.split("<table");if(l.length===2){f=l[0]+globalConfig.distanceFieldNote+"<table"+l[1]}var l=f.split("</tr>");if(l.length===2){f=l[0]+"<th><center>"+globalConfig.distanceLang+"</center></th></tr>"+l[1]}}var n=function(s,A,u){var z="";var B=s.length;for(var w=0;w<B;w++){var r=s[w];var q=TABS_CALCULATOR.getContent(r.attributes,[{label:globalConfig.InformationLang,content:u}]);var v=q[0].content;var t=r.geometry[0].getPosition();if(A){var y=v.split("</tr>");v=y[0]+"<td>"+(google.maps.geometry.spherical.computeDistanceBetween(t,d)/1000).toFixed(2)+"</td></tr>"}z=z+v}return z};var o=(a.length===0)?"":(f+n(a,p,c.content)+c.tail+"<br><br><br>");o=o+((h.length===0)?"":(k.head+n(h,false,k.content)+k.tail+"<br><br><br>"+globalConfig.whyAmISeeingThisLang));document.getElementById(globalConfig.queryTableDivId).innerHTML=o;var j=globalConfig.tableID;if(globalConfig.usejQueryUITable){var e={bJQueryUI:true,sPaginationType:"full_numbers"};if(globalConfig.language!=="EN"){e.oLanguage=globalConfig.dataTableLang}if(p){var g=f.split("</th><th>");e.aaSorting=[[g.length-1,"asc"]]}$("#"+j).dataTable(e);$("#"+globalConfig.noCoordinatesTableID).dataTable(e)}};globalConfig.preConditionsCallbackName=globalConfig.preConditionsCallbackName||"Wells";globalConfig.preConditionsCallbackList=globalConfig.preConditionsCallbackList||{Wells:function(a){var d=a.layerList[a.currentLayerId];var c={returnGeometry:(globalConfig.accessible)?false:true,outFields:d.outFields,where:a.where};if(a.withinExtent){var b=function(k){var g=k.getBounds();var e=g.getSouthWest();var j=g.getNorthEast();var h=new google.maps.LatLng(e.lat(),j.lng());var f=new google.maps.LatLng(j.lat(),e.lng());return new google.maps.Polygon({paths:[e,h,j,f,e]})};c.geometry=b(a.map)}return c}};globalConfig.preConditionsCallback=globalConfig.preConditionsCallback||globalConfig.preConditionsCallbackList[globalConfig.preConditionsCallbackName];globalConfig.validFeaturesFilter=globalConfig.validFeaturesFilter||function(a){var b=a.geometry[0].position;return(b.lat()>0.0001&&b.lng()<0.0001)};globalConfig.postConditionsCallbackName=globalConfig.postConditionsCallbackName||"Wells";globalConfig.postConditionsCallbackList=globalConfig.postConditionsCallbackList||{Wells:function(e){var d=Array.range(0,e.layerList.length-1).reduce(function(h,j){var g=e.layerList[j].result;if(g.hasOwnProperty("features")){return h.concat(g.features)}else{return h}},[]);if(d.length===0){e.totalCount=0;globalConfig.resultFoundSimple(e);if(e.requireGeocode){MOEMAP.geocodeAddress(e)}return}var b=d.filter(globalConfig.validFeaturesFilter);var a=d.filter(function(g){return !globalConfig.validFeaturesFilter(g)});e.totalCount=d.length;e.validCount=b.length;e.invalidCount=a.length;globalConfig.resultFoundSimple(e);if((!e.withinExtent)&&(b.length>0)){var f=globalConfig.calculatePointsBounds(b);globalConfig.setMapBound(e.map,f)}if(globalConfig.usePredefinedMultipleTabs){globalConfig.addMarkers(b,e.layerList[0].tabsTemplate)}else{globalConfig.addMarkersSimple(b,e.layerList[0].tabsTemplate)}if(e.layerList[0].hasOwnProperty("tableTemplate")){var c={coordinatesTable:e.layerList[0].tableTemplate,noCoordinatesTable:e.layerList[0].noCoordinatesTableTemplate};globalConfig.renderTable(d,c)}},AccessibleWells:function(c){var b=Array.range(0,c.layerList.length-1).reduce(function(f,g){var e=c.layerList[g].result;if(e.hasOwnProperty("features")){return f.concat(e.features)}else{return f}},[]);c.totalCount=b.length;globalConfig.resultFoundSimple(c);if(b.length===0){return}var a=c.layerList[0].tableTemplate;var d=a.head+Array.range(0,b.length-1).reduce(function(e,g){var f=TABS_CALCULATOR.getContent(b[g].attributes,[{label:globalConfig.InformationLang,content:a.content}]);var h=f[0].content;if(g%2===1){h=globalConfig.replaceChar(h,"<td>","<td  class='shaded'>")}return e+h},"")+a.tail;document.getElementById(globalConfig.queryTableDivId).innerHTML=d},SportFish:function(b){var a=Array.range(0,b.layerList.length-1).reduce(function(e,f){var d=b.layerList[f].result;if(d.hasOwnProperty("features")){return e.concat(d.features)}else{return e}},[]);if(a.length===0){if(b.requireGeocode){MOEMAP.geocodeAddress(b)}else{b.totalCount=0;globalConfig.resultFoundSimple(b)}return}b.totalCount=a.length;globalConfig.resultFoundSimple(b);if(!b.withinExtent){var c=globalConfig.calculatePointsBounds(a);globalConfig.setMapBound(b.map,c)}globalConfig.addMarkersSimple(a,b.layerList[0].tabsTemplate)}};globalConfig.postConditionsCallback=globalConfig.postConditionsCallback||globalConfig.postConditionsCallbackList[globalConfig.postConditionsCallbackName];globalConfig.addressGeocodingCallbackName=globalConfig.addressGeocodingCallbackName||"Wells";globalConfig.addressGeocodingCallbackList=globalConfig.addressGeocodingCallbackList||{Wells:function(c){var b=c.hasOwnProperty("withinExtent")?c.withinExtent:false;var d=c.map;if(b&&(!c.map.getBounds().contains(c.gLatLng))){c.totalCount=0;globalConfig.resultFoundSimple(c);return}if(c.hasOwnProperty("polylines")){MOEMAP.addPolylinesToMap(c.polylines)}var a=globalConfig.createMarker(c.gLatLng,c.searchString,globalConfig.searchedLocationIcon);MOEMAP.addOverlay(a);if(!b){c.map.setCenter(c.gLatLng);if(c.hasOwnProperty("zoomlevel")){c.map.setZoom(c.zoomlevel)}else{if(c.map.getZoom()<=globalConfig.maxQueryZoomLevel){c.map.setZoom(globalConfig.maxQueryZoomLevel)}}}c.totalCount=1;globalConfig.resultFoundSimple(c)},SWPLocator:function(a){var b=a.map;if(a.hasOwnProperty("polylines")){MOEMAP.addPolylinesToMap(a.polylines)}var c=a.gLatLng;if(a.hasOwnProperty("returnedAddress")){globalConfig.returnedAddress=a.returnedAddress}else{globalConfig.returnedAddress=a.address}b.setCenter(c);if(a.hasOwnProperty("zoomLevel")){b.setZoom(a.zoomLevel)}else{if(b.getZoom()<=globalConfig.maxQueryZoomLevel){b.setZoom(globalConfig.maxQueryZoomLevel)}}MOEMAP.mouseClickHandler({latLng:c})}};globalConfig.addressGeocodingCallback=globalConfig.addressGeocodingCallback||globalConfig.addressGeocodingCallbackList[globalConfig.addressGeocodingCallbackName];globalConfig.calculatePointsBounds=globalConfig.calculatePointsBounds||function(c){var d=new google.maps.LatLngBounds();var b=c.length;for(var a=0;a<b;a++){var e=c[a].geometry[0].getPosition();d.extend(e)}return d};globalConfig.setMapBound=globalConfig.setMapBound||function(b,a){b.fitBounds(a);var c=globalConfig.maxQueryZoomLevel;if(globalConfig.TWPSearch){c=globalConfig.maxQueryZoomLevelTWPSearch;globalConfig.TWPSearch=false}else{if(globalConfig.TWPLotConSearch){c=globalConfig.maxQueryZoomLevelTWPLotConSearch;globalConfig.TWPLotConSearch=false}}if(b.getZoom()>c){b.setZoom(c)}};globalConfig.calculateClusters=globalConfig.calculateClusters||function(c){var l=c.length;var e=[];for(var h=0;h<l;h++){var b=c[h];var d=b.geometry[0].getPosition();if(Math.abs(d.lng())+Math.abs(d.lat())>0.001){var g=false;for(var f=0;f<e.length;f++){var a=e[f].gLatLng;var k=Math.abs(d.lng()-a.lng())+Math.abs(d.lat()-a.lat());if(k<0.000001){(e[f]).list.push(b);g=true}}if(!g){var j={gLatLng:d,list:[b]};e.push(j)}}}return e};globalConfig.createMarker=globalConfig.createMarker||function(d,b,c){var a=new google.maps.Marker({position:d,icon:c});(function(f,e){google.maps.event.addListener(e,"click",function(){MOEMAP.openInfoWindow(e.getPosition(),f)})})(b,a);return a};globalConfig.infoWindowWidth=globalConfig.infoWindowWidth||"450px";globalConfig.calculateMulitpleTabsOneFeature=globalConfig.calculateMulitpleTabsOneFeature||function(a,l){var f=function(n){var k=document.createElement("div");k.style.width=globalConfig.infoWindowWidth;if(globalConfig.hasOwnProperty("infoWindowHeight")){k.style.height=globalConfig.infoWindowHeight}var j=new goog.ui.TabBar();for(var m=0;m<n.length;m++){var p=new goog.ui.Tab(n[m].label);p.content=n[m].content;j.addChild(p,true)}j.render(k);goog.dom.appendChild(k,goog.dom.createDom("div",{"class":"goog-tab-bar-clear"}));var o=goog.dom.createDom("div",{"class":"goog-tab-content"});if(globalConfig.hasOwnProperty("infoWindowContentHeight")){o.style.height=globalConfig.infoWindowContentHeight}if(globalConfig.hasOwnProperty("infoWindowContentWidth")){o.style.width=globalConfig.infoWindowContentWidth}goog.dom.appendChild(k,o);goog.events.listen(j,goog.ui.Component.EventType.SELECT,function(q){o.innerHTML=q.target.content});j.setSelectedTabIndex(0);return k};var g=a.length;var h=TABS_CALCULATOR.getContent(a[0].attributes,l);if(globalConfig.allowMultipleIdentifyResult){for(var e=1;e<g;e++){var b=TABS_CALCULATOR.getContent(a[e].attributes,l);for(var d=0;d<b.length;d++){h[d].content=h[d].content+b[d].content}}}for(var c=0;c<h.length;c++){if(typeof(l[c].head)!=="undefined"){h[c].content=l[c].head+h[c].content}if(typeof(l[c].tail)!=="undefined"){h[c].content=h[c].content+l[c].tail}}if((globalConfig.displayTotalIdentifyCount)&&(g>1)){if(globalConfig.allowMultipleIdentifyResult){h[0].content=globalConfig.totalFeatureReturned(g)+"<br>"+h[0].content}else{h[0].content=globalConfig.totalFeatureReturnedOnlyOneDisplayed(g)+"<br>"+h[0].content}}if(globalConfig.usePredefinedMultipleTabs){return f(h)}else{return h[0].content}};globalConfig.calculateCirclePolyline=globalConfig.calculateCirclePolyline||function(f,a){var b=[];for(var e=0;e<=360;e=e+10){var c=google.maps.geometry.spherical.computeOffset(f,a,e);b.push(new google.maps.LatLng(c.lat().toFixed(5),c.lng().toFixed(5)))}var d=new google.maps.Polyline({path:b,strokeColor:globalConfig.pointBuffer.color,strokeOpacity:globalConfig.pointBuffer.opacity,strokeWeight:globalConfig.pointBuffer.weight});return d};globalConfig.calculatePolylineBounds=globalConfig.calculatePolylineBounds||function(a){var c=new google.maps.LatLngBounds();var d=a.getPath();for(var b=0;b<d.length;b++){c.extend(d.getAt(b))}return c};globalConfig.disallowMouseClick=globalConfig.disallowMouseClick||false;MOEMAP=(function(){var y,m,u,z,n=[],c=false,w,f;function e(){if(z){z.setMap(null)}}function o(){if(n){for(var A=0;A<n.length;A++){n[A].setMap(null)}n.length=0}if(f){f.setMap(null)}e();if(globalConfig.usejQueryUITable){document.getElementById(globalConfig.queryTableDivId).innerHTML=""}}function j(F){if(typeof(F)!=="undefined"){for(var E=0;E<F.length;E++){var D=F[E];var A=D.getPaths().getLength();for(var C=0;C<A;C++){var B=new google.maps.Polyline({path:D.getPaths().getAt(C),strokeColor:globalConfig.twpBoundary.color,strokeOpacity:globalConfig.twpBoundary.opacity,strokeWeight:globalConfig.twpBoundary.weight,geodesic:false});B.setMap(y);n.push(B)}}}}function g(B,A){if(!z){z=new google.maps.InfoWindow({content:A,position:B})}else{z.setContent(A);z.setPosition(B)}z.open(y)}function d(A){if(globalConfig.isCoordinatesVisible){globalConfig.updateCoordinates(A.latLng.lat(),A.latLng.lng())}if(c){if(typeof(A)!=="undefined"){var B=google.maps.geometry.spherical.computeDistanceBetween(w,A.latLng);if(f){f.setMap(null)}f=globalConfig.calculateCirclePolyline(w,B);f.setMap(y);google.maps.event.addListener(f,"click",h);globalConfig.drawingCircleMessage(w.lat(),w.lng(),B/1000)}}}function p(A){if(A.hasOwnProperty("returnedAddress")){globalConfig.returnedAddress=A.returnedAddress}else{globalConfig.returnedAddress=A.address}A.map=y;A.preQueryCallback=globalConfig.preBufferCallback;A.postQueryCallback=globalConfig.postBufferCallback;A.layerList=globalConfig.queryLayerList;o();j(A.polylines);v(A,0)}function h(A){var C=google.maps.geometry.spherical.computeDistanceBetween(w,A.latLng)/1000;var B={radius:C,gLatLng:w,map:y,preQueryCallback:globalConfig.preBufferCallback,postQueryCallback:globalConfig.postBufferCallback,layerList:globalConfig.queryLayerList};o();v(B,0);c=false;TOOLSLEGEND.setPointBufferTool(false)}function v(C,A){if(A<C.layerList.length){C.currentLayerId=A;var D=C.preQueryCallback(C);var B=new gmaps.ags.Layer(C.layerList[A].url);B.query(D,function(E){C.layerList[A]["result"]=E;v(C,A+1)})}else{C.postQueryCallback(C)}}function t(A){if(TOOLSLEGEND.isPointBufferToolSelected()){if(!c){w=A.latLng;c=true}else{h(A)}return}e();var B={gLatLng:A.latLng,map:y,preQueryCallback:globalConfig.preIdentifyCallback,postQueryCallback:globalConfig.postIdentifyCallback,layerList:globalConfig.queryLayerList};if(globalConfig.hasOwnProperty("mergeFunction")){B.mergeFunction=globalConfig.mergeFunction}v(B,0)}function k(B){var A={};if(B.hasOwnProperty("address")){A=B;A.searchString=B.address}else{A={address:B,searchString:B}}if(B.hasOwnProperty("gLatLng")){A.map=y;globalConfig.addressGeocodingCallback(A)}else{MOEMAP.geocodeAddress(A)}}function q(A,C){var D=globalConfig.identifyMultiplePolygonLayersServicesTemplate.layerList[A];var B=D.result.features[C].geometry[0];B.setMap(y);B.setOptions(D.style);n.push(B)}function s(A){y=A;if(!globalConfig.disallowMouseClick){google.maps.event.addListener(y,"click",t)}google.maps.event.addListener(y,"mousemove",d);google.maps.event.addListener(y,"zoom_changed",r)}function r(){if(y.getZoom()>globalConfig.maxMapScale){y.setZoom(globalConfig.maxMapScale)}if(y.getZoom()<globalConfig.minMapScale){y.setZoom(globalConfig.minMapScale)}}function b(A){A.setMap(y);n.push(A)}function x(A){A.map=y;A.preQueryCallback=globalConfig.preConditionsCallback;A.postQueryCallback=globalConfig.postConditionsCallback;A.layerList=globalConfig.queryLayerList;v(A,0)}function l(A){A.map=y;A.callback=globalConfig.addressGeocodingCallback;A.address=A.searchString;LOCATOR.locate(A)}var a={init:s,clearOverlays:o,openInfoWindow:g,addOverlay:b,queryLayersWithConditionsExtent:x,geocodeAddress:l,addPolylinesToMap:j,mouseClickHandler:t,addressBufferCallback:p,identifyMultiplePolygonLayersWithLocation:k,showPolygonFeature:q};return a})();